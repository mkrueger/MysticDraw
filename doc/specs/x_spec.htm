<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head><script src="//archive.org/includes/analytics.js?v=cf34f82" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app217.us.archive.org';v.server_ms=280;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="/_static/js/bundle-playback.js?v=rQCmsv02" charset="utf-8"></script>
<script type="text/javascript" src="/_static/js/wombat.js?v=UHAOicsW" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("http://web.archive.org/web");
  __wm.wombat("http://www.acid.org/info/xbin/x_spec.htm","20120204063040","http://web.archive.org/","web","/_static/",
	      "1328337040");
</script>
<link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=fantwOh2" />
<link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
<!-- End Wayback Rewrite JS Include -->

   <title>   XBin Specifications
  </title>
   <meta name="GENERATOR" content="Mozilla/3.01Gold (WinNT; I) [Netscape]">
</head>
<body><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
</style>
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display:none;direction:ltr;">
<div id="wm-ipp" style="position:fixed;left:0;top:0;right:0;">
<div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="https://archive.org/includes/donate.php?as_page=1&amp;platform=wb&amp;referer=http%3A//web.archive.org/web/20120204063040/http%3A//www.acid.org/info/xbin/x_spec.htm"
	    scrolling="no" frameborder="0" style="width:100%; height:100%">
    </iframe>
  </div>
</div><div id="wm-ipp-inside">
  <div id="wm-toolbar" style="position:relative;display:flex;flex-flow:row nowrap;justify-content:space-between;">
    <div id="wm-logo" style="/*width:110px;*/padding-top:12px;">
      <a href="/web/" title="Wayback Machine home page"><img src="/_static/images/toolbar/wayback-toolbar-logo-200.png" srcset="/_static/images/toolbar/wayback-toolbar-logo-100.png, /_static/images/toolbar/wayback-toolbar-logo-150.png 1.5x, /_static/images/toolbar/wayback-toolbar-logo-200.png 2x" alt="Wayback Machine" style="width:100px" border="0" /></a>
    </div>
    <div class="c" style="display:flex;flex-flow:column nowrap;justify-content:space-between;flex:1;">
      <form class="u" style="display:flex;flex-direction:row;flex-wrap:nowrap;" target="_top" method="get" action="/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="http://www.acid.org/info/xbin/x_spec.htm" onfocus="this.focus();this.select();" style="flex:1;"/><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20120204063040" /><input type="submit" value="Go" />
      </form>
      <div style="display:flex;flex-flow:row nowrap;align-items:flex-end;">
		<div class="s" id="wm-nav-captures">
	  	  <a class="t" href="/web/20120204063040*/http://www.acid.org/info/xbin/x_spec.htm" title="See a list of every capture for this URL">52 captures</a>
	  <div class="r" title="Timespan for captures of this URL">13 Sep 2001 - 05 Jun 2019</div>
	  </div>
	<div class="k" style="flex:1;">
	  <a href="" id="wm-graph-anchor">
	    <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
	      <canvas id="wm-sparkline-canvas" width="675" height="27" border="0"></canvas>
	    </div>
	  </a>
	</div>
      </div>
    </div>
    <div class="n">
      <table>
	<tbody>
	  <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
	  <tr class="m">
	    <td class="b" nowrap="nowrap"><a href="http://web.archive.org/web/20110927060836/http://www.acid.org/info/xbin/x_spec.htm" title="27 Sep 2011"><strong>Sep</strong></a></td>
	    <td class="c" id="displayMonthEl" title="You are here: 06:30:40 Feb 04, 2012">FEB</td>
	    <td class="f" nowrap="nowrap"><a href="http://web.archive.org/web/20120414211644/http://www.acid.org/info/xbin/x_spec.htm" title="14 Apr 2012"><strong>Apr</strong></a></td>
	  </tr>
	  <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
	  <tr class="d">
	    <td class="b" nowrap="nowrap"><a href="http://web.archive.org/web/20110927060836/http://www.acid.org/info/xbin/x_spec.htm" title="06:08:36 Sep 27, 2011"><img src="/_static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a></td>
	    <td class="c" id="displayDayEl" style="width:34px;font-size:22px;white-space:nowrap;" title="You are here: 06:30:40 Feb 04, 2012">04</td>
	    <td class="f" nowrap="nowrap"><a href="http://web.archive.org/web/20120414211644/http://www.acid.org/info/xbin/x_spec.htm" title="21:16:44 Apr 14, 2012"><img src="/_static/images/toolbar/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0" /></a></td>
	  </tr>
	  <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
	  <tr class="y">
	    <td class="b" nowrap="nowrap"><a href="http://web.archive.org/web/20100901055431/http://www.acid.org:80/info/xbin/x_spec.htm" title="01 Sep 2010"><strong>2010</strong></a></td>
	    <td class="c" id="displayYearEl" title="You are here: 06:30:40 Feb 04, 2012">2012</td>
	    <td class="f" nowrap="nowrap"><a href="http://web.archive.org/web/20160310121842/http://acid.org/info/xbin/x_spec.htm" title="10 Mar 2016"><strong>2016</strong></a></td>
	  </tr>
	</tbody>
      </table>
    </div>
    <div class="r" style="display:flex;flex-flow:column nowrap;align-items:flex-end;justify-content:space-between;">
      <div id="wm-btns" style="text-align:right;height:23px;">
        	<span class="xxs">
          <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a id="wm-save-snapshot-open" href="#"
	     title="Share via My Web Archive" >
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in">
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
	</span>
        	<a class="xxs" href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
	<a id="wm-tb-close" href="#close" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" class="xxs">
        <a href="/web/20120204063040/http://web.archive.org/screenshot/http://www.acid.org/info/xbin/x_spec.htm"
           id="wm-screenshot"
           title="screenshot">
          <span class="wm-icon-screen-shot"></span>
        </a>
        <a href="#" id="wm-video" title="video">
          <span class="iconochive-movies"></span>
        </a>
	<a id="wm-share-facebook" href="#" data-url="http://web.archive.org/web/20120204063040/http://www.acid.org/info/xbin/x_spec.htm" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
	<a id="wm-share-twitter" href="#" data-url="http://web.archive.org/web/20120204063040/http://www.acid.org/info/xbin/x_spec.htm" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
      <div style="padding-right:2px;text-align:right;white-space:nowrap;">
	<a id="wm-expand" class="wm-btn wm-closed" href="#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span class="xxs" style="font-size:80%;">About this capture</span></a>
      </div>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
                    <div id="wm-capinfo-collected-by">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
            <div style="display:inline-block;vertical-align:top;width:50%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/webwidecrawl);"></span>
		Organization: <a style="color:#33f;" href="https://archive.org/details/webwidecrawl" target="_new"><span class="wm-title">Internet Archive</span></a>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  The Internet Archive discovers and captures web pages through many different web crawls.

At any given time several distinct crawls are running, some for months, and some every day or longer.

View the web archive through the <a href="http://archive.org/web/web.php">Wayback Machine</a>.
	</div>
	      </div>
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/wikipediaoutlinks00003)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/wikipediaoutlinks00003" target="_new"><span class="wm-title">Wikipedia Outlinks February 2012</span></a></div>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Crawl of outlinks from wikipedia.org started February, 2012. These files are currently not publicly accessible.
	</div>
	      </div>
    </div>
    </div>
    <div id="wm-capinfo-timestamps">
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="/_static/images/loading.gif" alt="loading" /></div>
    </div>
    </div>
  </div></div></div></div><div id="wm-ipp-print">The Wayback Machine - http://web.archive.org/web/20120204063040/http://www.acid.org/info/xbin/x_spec.htm</div>
<script type="text/javascript">
__wm.bt(675,27,25,2,"web","http://www.acid.org/info/xbin/x_spec.htm","20120204063040",1996,"/_static/",["/_static/css/banner-styles.css?v=fantwOh2","/_static/css/iconochive.css?v=qtvMKcIJ"], false);
  __wm.rw(1);
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

<h1 align="CENTER">XBin Specifications</h1>

<h2>Introduction.</h2>

<ul>
<p>First of all, the default file extention of an XBin file is '.XB', just
as a BIN file by default has '.BIN' as extention. Even though long filenames
are getting popular due to newer operating systems like Windows 95, Windows
NT, OS/2, Unix, Linux... there was specifically chosen for .XB over .XBin
</p>

<p>An XBIN consists of 4 main parts, a header (required), a palette (optional),
a font (optional), and the image data (optional). </p>

<center><table border="1" cellspacing="4">
<tr>
<td><a href="#Header">Header</a> (Required)</td>
</tr>

<tr>
<td><a href="#Palette">Palette</a> (Optional)</td>
</tr>

<tr>
<td><a href="#Font">Font</a> (Optional)</td>
</tr>

<tr>
<td><a href="#ImageDate">Image Data</a> (Optional)</td>
</tr>
</table></center>

<p>Even though it may seem strange, an XBin is not <b>required</b> to have
an image. You can use the standard XBin format for storing pre-made fonts
and pre-made palettes which you could load from a viewer/editor (as alternate
font/palette).</p>
</ul>

<h2><a name="Header"></a>Header.</h2>

<ul>
<p>The XBIN header consists of 11 bytes. The header describes the size
of the image, how the screen should be set up, and how the rest of the
XBin should be processed.</p>

<center><table border="1" cellspacing="4">
<caption>
<p>Layout of XBin header</p>
</caption>

<tr>
<td><b>FieldName</b></td>

<td><b>Size</b></td>

<td><b>Type</b></td>

<td><b>Purpose</b></td>
</tr>

<tr>
<td>ID</td>

<td>4</td>

<td>Char</td>

<td>XBin identification, these 4 bytes should contain the text &quot;XBIN&quot;
(All capitals). Any file which does not have a matching ID should not be
considered to be an XBin file.</td>
</tr>

<tr>
<td>EOFChar</td>

<td>1</td>

<td>Char</td>

<td>End of file character (Ctrl-Z, Ascii 26, 1A hex) When a user uses the
TYPE command to view the file, he'll just see &quot;XBIN&quot; printed
on screen.</td>
</tr>

<tr>
<td>Width</td>

<td>2</td>

<td>Numeric</td>

<td>Width of the image in character columns.</td>
</tr>

<tr>
<td>Height</td>

<td>2</td>

<td>Numeric</td>

<td>Height of the image in character rows.</td>
</tr>

<tr>
<td>FontSize</td>

<td>1</td>

<td>Numeric</td>

<td>Fontsize 1 Numeric Number of pixel rows (scanlines) in the font, Default
value for VGA is 16. Any value from 1 to 32 is technically possible on
VGA. Any other values should be considered illegal.</td>
</tr>

<tr>
<td>Flags</td>

<td>1</td>

<td>Bits</td>

<td>A set of flags indicating special features in the XBin file. <a href="#Flags">More
on this later</a>.</td>
</tr>
</table></center>

<p>A sample XBin header in Pascal could be : </p>

<p><tt>TYPE XB_Header = RECORD<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ID
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: ARRAY[0..3] OF Char;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EofChar
: Byte;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Width
&nbsp;&nbsp;: Word;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Height
&nbsp;: Word;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FontSize:
Byte;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags
: Byte;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END;</tt></p>

<p>A sample XBIN header in C could be : </p>

<p><tt>typedef struct XB_Header {<br>
&nbsp;&nbsp;&nbsp;unsigned char &nbsp;&nbsp;ID[4];<br>
&nbsp;&nbsp;&nbsp;unsigned char &nbsp;&nbsp;EofChar;<br>
&nbsp;&nbsp;&nbsp;unsigned short &nbsp;Width;<br>
&nbsp;&nbsp;&nbsp;unsigned short &nbsp;Height;<br>
&nbsp;&nbsp;&nbsp;unsigned char &nbsp;&nbsp;Fontsize;<br>
&nbsp;&nbsp;&nbsp;unsigned char &nbsp;&nbsp;Flags;<br>
};</tt></p>

<h3><a name="Flags"></a>Flags.</h3>

<ul>
<p>The 'flags' field in the XBin header tells us more on special features
the XBin has in use. The flags field consists out of 8 separate bits each
with it's unique function. Bits which are 0, are considered OFF or disabled,
Bits with 1 are considered ON or enabled.</p>

<center><table border="1" cellspacing="4">
<caption>
<p>Flag byte bit usage.</p>
</caption>

<tr>
<td><b>7</b></td>

<td><b>6</b></td>

<td><b>5</b></td>

<td><b>4</b></td>

<td><b>3</b></td>

<td><b>2</b></td>

<td><b>1</b></td>

<td><b>0</b></td>
</tr>

<tr>
<td>Unused</td>

<td>Unused</td>

<td>Unused</td>

<td>512Chars</td>

<td>NonBlink</td>

<td>Compress</td>

<td>Font</td>

<td>Palette</td>
</tr>
</table></center>

<h4>Palette</h4>

<ul>
<p>Indicates if a palette is present (1) or whether no palette is present
(0) and the default palette applies.</p>
</ul>

<h4>Font</h4>

<ul>
<p>Indicates if a font is present (1) or whether no font is present (0)
and the default font applies. Since the VGA default fontsize is 16, this
bit should be 1 for all other font sizes. In consequence, a font should
then also be present in the XBin file.</p>
</ul>

<h4>Compress</h4>

<ul>
<p>Indicates if the XBin has compressed image data (1) or whether the image
datais stored in raw memory format (0)</p>
</ul>

<h4>NonBlink</h4>

<ul>
<p>When 1, the image should be shown in non-blink (IceColor) mode.</p>
</ul>

<h4>512Chars</h4>

<ul>
<p>When 1, the image is built up out of 512 characters in stead of the
usual 256. This bit also requires the <b>Font</b> bit to be set since the
VGA has no default font for 512&nbsp;character mode.</p>
</ul>
</ul>
</ul>

<h2><a name="Palette"></a>Palette.</h2>

<ul>
<p>A palette is only present when the '<b>Palette</b>' bit is set in the
<b>Flags </b>field of the XBin header. </p>

<p>The palette is built up of 48 bytes, a red, green and blue value (in
that order) for each of the 16 colors. Each palette value can range from
0 to 63.</p>
</ul>

<h2><a name="Font"></a>Font.</h2>

<ul>
<p>A Font is only present when the '<b>Font</b>' bit is set in the <b>Flags
</b>field of the XBin header. </p>

<p>For each character (256, or 512 when the '<b>512Chars</b>' bit is set
in the <b>Flags </b>field) <b>FontSize</b> bytes are stored in sequence.
The character set is defined from the top row of each character matrix
to the bottom row. </p>

<p>In a 16 pixel high font, the first 16 bytes are the fontmatrix for ascii
value 0, the next 16 are for ascii 1 and so on. In total, a 16 pixel font
would have a font of 4096 bytes (16*256).</p>

<p>Technically, the biggest font possible would be 16Kb in size. (32 pixels
high, 512 characters), and the smallest would be 256 bytes (1 pixel high,
256 characters).</p>
</ul>

<h2><a name="ImageDate"></a>Image data.</h2>

<ul>
<p>The image data is a raw image of video memory. Each character consists
of 2 bytes, the first being the character, the second being the attribute
(color).</p>

<p>The size of the image data would thus be equal to <b>Width</b>*<b>Height</b>*2.
The biggest XBin (not including header, palette and font) would be a whopping
8Gb (65535*65535*2) in size and the smallest would be 0 bytes (0*0*2).</p>

<p>Unless the '<b>Compress</b>' bit is set in the <b>Flags</b> field, image
data is stored in the exact way you would need it in video memory.</p>

<p>When the '<b>Compress</b>' bit is set, image data is compressed with
XBin-Compression. This is a fairly simple compression system, which should
pose no real difficulty to decompress. As compression goes however an XBin
compressor is a little harder to write.</p>
</ul>

<h2>XBin Compression</h2>

<ul>
<p>The XBin compression uses a slightly improved Run-Length Encoding scheme
which will do very well on this type of data.</p>

<p>In stead of describing how a compressor would work, I'll explain how
the compression works by giving some examples. In these examples, you'll
see strings of characters more or less like this one : </p>

<ul>
<p><tt>Aa,Ab,Ac,Ba,Bb,Bc,De,Zx,Yu</tt> </p>
</ul>

<p>This string represents a part of the uncompressed data. The capital
letters are character bytes, the lower case letters are attribute bytes.</p>

<p>OK, pay close attention, as things may get hairy now ;-).</p>

<p>When you examine an ANSi or a BIN file, you may or may not have noticed
several characteristics which are typical for ANSi/BIN files. You see sequences
of identical characters one after another, and you see sequences of identical
colors one after another. You may even see the combination of both; identical
characters in identical colors one after another. </p>

<p>XBin-compression makes use of these characteristics by replacing sequences
of identical characters/color with a counter and the actual data. A sequence
like : </p>

<ul>
<p><tt>Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Aa,Bb,Bb,Bb,Bb</tt> </p>
</ul>

<p>could easily be replaced with </p>

<ul>
<p><tt>[Repeat 9 times]Aa,[Repeat 4 times]Bb</tt> </p>
</ul>

<p>The '<tt>[Repeat x times]</tt>' tag is the repeat counter. </p>

<p>If you're a smart observer, you've probably already figured where I'm
driving at. It shouldn't be too hard to figure out that there's a need
for four different types of compression :</p>

<ol>
<li>No compression (when two subsequent character/attribute pairs have
no relation).</li>

<li>Character compression (for a sequence of identical characters in different
colors).</li>

<li>Attribute compression (for a sequence of different characters with
identical attributes).</li>

<li>character/attribute compression (for a sequence of identical character/attributes).
</li>
</ol>

<p>Hmm... 4 types of compression.. That would nicely fit in 2 bits, leaving
6 bits in a byte unused. Now.. what if we were to use those 6 bits for
the repeat counter... This is exactly what XBin compression does... </p>

<p>The XBin compression consists out of a sequence of repeat counters followed
by the appropriate number of data bytes. </p>

<p>Before we go any further now, allow me to make an important note. XBin
compression works on a <b>ROW</b> by <b>ROW</b> basis. The compression
does <b>NOT</b> carry through to the next line. So, if you would have for
example two lines like this : </p>

<ul>
<p><tt>Ab,Aa,Aa,Aa <br>
Aa,Aa,Aa,Ab </tt></p>
</ul>

<p>It should <b>NOT</b> be encoded as </p>

<ul>
<p><tt>Ab,[Repeat 6 Times]Aa,Ab</tt> </p>
</ul>

<p>but <b>SHOULD</b> be encoded as </p>

<ul>
<p><tt>Ab,[Repeat 3 Times]Aa<br>
[Repeat 3 Times]Aa,Ab</tt> </p>
</ul>

<p>The are several reasons why it should work like this :</p>

<ul>
<li>on-the-fly decoding is facilitated (more on this later) </li>

<li>You could run into a problem with odd XBin widths since video memory
memory always has an even width.  You'd have to implement special code to
skip over this one odd byte.</li>

<li>You at least have SOME way of detecting errors in the XBin file.  Whenever
a line doesn't nicely work out to the required width there must be some
error in the XBin file (or a bug in your decoding routine ;-))</li>
</ul>
</ul>

<h2>XBIN Compression continued.</h2>

<ul>
<p>The repeat counter byte is split up in two parts, the two most significant
bits are the compression type, the six least significant bits are the actual
repeat counter.</p>

<center><table border="1" cellspacing="4">
<caption>
<p>Repeat-counter layout</p>
</caption>

<tr>
<td><b>7</b></td>

<td><b>6</b></td>

<td><b>5</b></td>

<td><b>4</b></td>

<td><b>3</b></td>

<td><b>2</b></td>

<td><b>1</b></td>

<td><b>0</b></td>
</tr>

<tr>
<td colspan="2">Compression Type
<table border="1">
<tr>
<td>0</td>

<td>0</td>

<td>No compression</td>
</tr>

<tr>
<td>0</td>

<td>1</td>

<td>Character compression</td>
</tr>

<tr>
<td>1</td>

<td>0</td>

<td>Attribute compression</td>
</tr>

<tr>
<td>1</td>

<td>1</td>

<td>Character/Attribute compression</td>
</tr>
</table>
</td>

<td colspan="6">Repeat counter
<p>Since a repeat of 0 is downright useless, we'll store the repeat counter
as one less of it's actual number of repeats.</p>

<p>A&nbsp;value of 0 indicates a repeat of 1.<br>
A value of 1 indicates a repeat of 2.<br>
And so on, goving a us a maximum of a 64-repeat.</p>
</td>
</tr>
</table></center>

<p>In the examples, the Repeat counter byte will be used as <tt>[Type,Count]</tt>
Where <b><tt>Type</tt></b> is <tt>00</tt>, <tt>01</tt>, <tt>10</tt> or
<tt>11</tt>, and <b><tt>Count</tt></b> is a number from 0 to 63. </p>

<p>For example, [01,10] would mean, Attribute compression with a repeat
counter of 10 (11 effective repeats).</p>

<h4>Compression type 00 : No compression.</h4>

<ul>
<p>This type of compression is needed whenever two or more sequences of
character/attribute pairs have nothing in common. The repeat counter is
followed by the appropriate number of character/attribute pairs.</p>

<p>Data : </p>

<ul>
<p><tt>AaBbCcDdEeFfGg </tt></p>
</ul>

<p>XBin-Compressed : </p>

<ul>
<p><tt>[00,6]AaBbCcDdEeFfGg</tt></p>
</ul>

<p>In a worst-case situation where you would have to use <b>No compression</b>
on the entire file, this would mean the 'compressed' data is bigger than
the non-compressed data.  In this situation, the best thing to do would
be to store the image data uncompressed, and set the '<b>Compress</b>'
bit in the <b>Flags</b> field to 0. </p>
</ul>

<h4>Compression type 01 : Character compression.</h4>

<ul>
<p>This type of compression is used whenever a sequence of identical characters
is found, but where the attribute changes. The repeat counter is followed
by the character to use which is in turn followed by the appropriate number
of attribute bytes. </p>

<p>Data : </p>

<ul>
<p><tt>AaAbAcAdAeAfAg </tt></p>
</ul>

<p>XBin-Compressed : </p>

<ul>
<p><tt>[01,6]Aabcdefg</tt> </p>
</ul>
</ul>

<h4>Compression type 10 : Attribute compression. </h4>

<ul>
<p>This type of compression is used whenever a sequence of identical attributes
is found, but where the character changes. The repeat counter is followed
by the attribute to use which is in turn followed by the appropriate number
of character bytes. </p>

<p>Data : </p>

<ul>
<p><tt>AaBaCaDaEaFaGa </tt></p>
</ul>

<p>XBin-Compressed : </p>

<ul>
<p><tt>[10,6]aABCDEFG </tt></p>
</ul>

<p>! Note this is the only time you'll see the attribute byte BEFORE the
characters. </p>
</ul>

<h4>Compression type 11 : Character/Attribute compression. </h4>

<ul>
<p>This type of compression is used whenever a sequence of identical character
attribute pairs is found. The repeat counter is followed by the character
attribute pair. </p>

<p>Data : </p>

<ul>
<p><tt>AaAaAaAaAaAaAa </tt></p>
</ul>

<p>XBIN Compressed : </p>

<ul>
<p><tt>[11,6]Aa </tt></p>
</ul>
</ul>

<p>You'll find example code on how to do XBin compression and decompression
in the <a href="index.html">XBin Developers Kit</a>.  Decompression is also
explained in the <a href="x_tut.htm">XBin Tutorial</a>.</p>
</ul>

<ul></ul>

<p><a href="xbin.htm">Back to XBIN</a> </p>

<p>This page is being maintained by </p>

<address><a href="http://web.archive.org/web/20120204063040/mailto:tasmaniac@acid.org">Tasmaniac@acid.org</a></address>


</body>
</html>

<!--
     FILE ARCHIVED ON 06:30:40 Feb 04, 2012 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 23:13:14 Feb 23, 2022.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 206.782
  exclusion.robots: 0.182
  exclusion.robots.policy: 0.175
  RedisCDXSource: 0.596
  esindex: 0.008
  LoadShardBlock: 187.192 (3)
  PetaboxLoader3.resolve: 135.973 (3)
  PetaboxLoader3.datanode: 53.256 (4)
  CDXLines.iter: 15.978 (3)
  load_resource: 61.84
-->